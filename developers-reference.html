<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Developers Reference</title>
<style>
/*! Based on the Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */

:root {
  --color-black: rgba(44, 62, 80, 0.9);

  --color-fuchsia-100: hsl(344, 97%, 95%);
  --color-fuchsia-200: hsl(344, 97%, 90%);
  --color-fuchsia-300: hsl(344, 97%, 85%);
  --color-fuchsia-400: hsl(344, 97%, 75%);
  --color-fuchsia-500: hsl(344, 97%, 64%);
  --color-fuchsia-600: hsl(344, 97%, 54%);
  --color-fuchsia-700: hsl(344, 97%, 44%);
  --color-fuchsia-800: hsl(344, 97%, 34%);
  --color-fuchsia-900: hsl(344, 97%, 20%);

  --color-petrol-100: hsl(157, 30%, 95%);
  --color-petrol-200: hsl(157, 30%, 90%);
  --color-petrol-300: hsl(157, 30%, 80%);
  --color-petrol-400: hsl(157, 30%, 70%);
  --color-petrol-500: hsl(157, 30%, 63%);
  --color-petrol-600: hsl(157, 30%, 53%);
  --color-petrol-700: hsl(157, 30%, 40%);
  --color-petrol-800: hsl(157, 30%, 30%);
  --color-petrol-900: hsl(157, 30%, 20%);

  --color-blue-100: hsla(209, 58%, 95%);
  --color-blue-200: hsla(209, 58%, 80%);
  --color-blue-300: hsla(209, 58%, 70%);
  --color-blue-400: hsla(209, 58%, 60%);
  --color-blue-500: hsla(209, 58%, 50%);
  --color-blue-600: hsla(209, 58%, 46%);
  --color-blue-700: hsla(209, 58%, 36%);
  --color-blue-800: hsla(209, 58%, 30%);
  --color-blue-900: hsl(209, 59%, 20%);

  --color-amber: hsl(37, 100%, 55%);

  /* ----------------------------------------------------------------------- */

  --fg: #000;
  --bg: #fff;
  --lh: 1;
  --title-color: var(--color-fuchsia-800);
  --title-lh: 1.45;
  --title-weight: 400;
  --header-color: var(--color-petrol-800);
  --hx-color: var(--color-fuchsia-700);
  --hx-weight: 500;
  --link-color: var(--color-blue-700);
  --link-active-color: var(--color-blue-300);
  --code-color: rgba(0, 0, 0, 0.9);
}

html {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;

  -webkit-text-size-adjust: 100%;
}

a {
  background: none;
}
a:focus {
  outline: thin dotted;
}
a:active,
a:hover {
  outline: 0;
}
h1 {
  font-size: 2em;
  margin: 0.67em 0;
}
b,
strong {
  font-weight: bold;
}
abbr {
  font-size: 0.9em;
}
abbr[title] {
  cursor: help;
  border-bottom: 1px dotted #dddddf;
  text-decoration: none;
}
dfn {
  font-style: italic;
}
hr {
  height: 0;
}
mark {
  background: #ff0;
  color: #000;
}
code,
kbd,
pre,
samp {
  font-family: monospace;
  font-size: 1em;
}
pre {
  white-space: pre-wrap;
}
q {
  quotes: "\201C""\201D""\2018""\2019";
}
small {
  font-size: 80%;
}
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
sup {
  top: -0.5em;
}
sub {
  bottom: -0.25em;
}
img {
  border: 0;
}
svg:not(:root) {
  overflow: hidden;
}
figure {
  margin: 0;
}
audio,
video {
  display: inline-block;
}
audio:not([controls]) {
  display: none;
  height: 0;
}
fieldset {
  border: 1px solid silver;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}
legend {
  border: 0;
  padding: 0;
}
button,
input,
select,
textarea {
  font-family: inherit;
  font-size: 100%;
  margin: 0;
}
button,
input {
  line-height: normal;
}
button,
select {
  text-transform: none;
}
button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button;
  cursor: pointer;
}
button[disabled],
html input[disabled] {
  cursor: default;
}
input[type="checkbox"],
input[type="radio"] {
  padding: 0;
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}
textarea {
  overflow: auto;
  vertical-align: top;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
*,
::before,
::after {
  box-sizing: border-box;
}
html,
body {
  font-size: 100%;
}
body {
  background: var(--bg);
  color: var(--fg);
  padding: 0;
  margin: 0;
  line-height: var(--lh);
  position: relative;
  cursor: auto;
  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;
  word-wrap: anywhere;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
}
a:hover {
  cursor: pointer;
}
img,
object,
embed {
  max-width: 100%;
  height: auto;
}
object,
embed {
  height: 100%;
}
img {
  -ms-interpolation-mode: bicubic;
}
.left {
  float: left !important;
}
.right {
  float: right !important;
}
.text-left {
  text-align: left !important;
}
.text-right {
  text-align: right !important;
}
.text-center {
  text-align: center !important;
}
.text-justify {
  text-align: justify !important;
}
.hide {
  display: none;
}
img,
object,
svg {
  display: inline-block;
  vertical-align: middle;
}
textarea {
  height: auto;
  min-height: 50px;
}
select {
  width: 100%;
}
.subheader,
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
  line-height: var(--title-lh);
  color: var(--title-color);
  font-weight: var(--title-weight);
  margin-top: 0;
  margin-bottom: 0.25em;
}
div,
dl,
dt,
dd,
ul,
ol,
li,
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6,
pre,
form,
p,
blockquote,
th,
td {
  margin: 0;
  padding: 0;
}
a {
  color: var(--link-color);
  text-decoration: underline;
  line-height: inherit;
}
a:hover,
a:focus {
  color: var(--link-active-color);
}
a img {
  border: 0;
}
p {
  line-height: 1.6;
  margin-bottom: 1.25em;
  text-rendering: optimizeLegibility;
}
p aside {
  font-size: 0.875em;
  line-height: 1.35;
  font-style: italic;
}
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6 {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-weight: var(--hx-weight);
  font-style: normal;
  color: var(--hx-color);
  text-rendering: optimizeLegibility;
  margin-top: 1em;
  margin-bottom: 0.5em;
  line-height: 1.0125em;
}
h1 small,
h2 small,
h3 small,
#toctitle small,
.sidebarblock > .content > .title small,
h4 small,
h5 small,
h6 small {
  font-size: 60%;
  color: #e99b8f;
  line-height: 0;
}
h1 {
  font-size: 2.125em;
}
h2 {
  font-size: 1.6875em;
}
h3,
#toctitle,
.sidebarblock > .content > .title {
  font-size: 1.375em;
}
h4,
h5 {
  font-size: 1.125em;
}
h6 {
  font-size: 1em;
}
hr {
  border: solid #dddddf;
  border-width: 1px 0 0;
  clear: both;
  margin: 1.25em 0 1.1875em;
}
em,
i {
  font-style: italic;
  line-height: inherit;
}
strong,
b {
  font-weight: bold;
  line-height: inherit;
}
small {
  font-size: 60%;
  line-height: inherit;
}
code {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  font-weight: 400;
  color: var(--code-color);
}
ul,
ol,
dl {
  line-height: 1.6;
  margin-bottom: 1.25em;
  list-style-position: outside;
  font-family: inherit;
}
ul,
ol {
  margin-left: 1.5em;
}
ul li ul,
ul li ol {
  margin-left: 1.25em;
  margin-bottom: 0;
}
ul.circle {
  list-style-type: circle;
}
ul.disc {
  list-style-type: disc;
}
ul.square {
  list-style-type: square;
}
ul.circle ul:not([class]),
ul.disc ul:not([class]),
ul.square ul:not([class]) {
  list-style: inherit;
}
ol li ul,
ol li ol {
  margin-left: 1.25em;
  margin-bottom: 0;
}
dl dt {
  margin-bottom: 0.3125em;
  font-weight: bold;
}
dl dd {
  margin-bottom: 1.25em;
}
blockquote {
  margin: 0 0 1.25em;
  padding: 0.5625em 1.25em 0 1.1875em;
  border-left: 1px solid #ddd;
}
blockquote,
blockquote p {
  line-height: 1.6;
  color: rgba(0, 0, 0, 0.85);
}
@media screen and (min-width: 768px) {
  h1,
  h2,
  h3,
  #toctitle,
  .sidebarblock > .content > .title,
  h4,
  h5,
  h6 {
    line-height: 1.2;
  }
  h1 {
    font-size: 2.75em;
  }
  h2 {
    font-size: 2.3125em;
  }
  h3,
  #toctitle,
  .sidebarblock > .content > .title {
    font-size: 1.6875em;
  }
  h4 {
    font-size: 1.4375em;
  }
}
table {
  background: #fff;
  margin-bottom: 1.25em;
  border: 1px solid #dedede;
  word-wrap: normal;
}
table thead,
table tfoot {
  background: #f7f8f7;
}
table thead tr th,
table thead tr td,
table tfoot tr th,
table tfoot tr td {
  padding: 0.5em 0.625em 0.625em;
  font-size: inherit;
  color: var(--fg);
  text-align: left;
}
table tr th,
table tr td {
  padding: 0.5625em 0.625em;
  font-size: inherit;
  color: var(--fg);
}
table tr.even,
table tr.alt {
  background: #f8f8f7;
}
table thead tr th,
table tfoot tr th,
table tbody tr td,
table tr td,
table tfoot tr td {
  line-height: 1.6;
}
h1,
h2,
h3,
#toctitle,
.sidebarblock > .content > .title,
h4,
h5,
h6 {
  line-height: 1.2;
  word-spacing: -0.05em;
}
h1 strong,
h2 strong,
h3 strong,
#toctitle strong,
.sidebarblock > .content > .title strong,
h4 strong,
h5 strong,
h6 strong {
  font-weight: 400;
}
.center {
  margin-left: auto;
  margin-right: auto;
}
.stretch {
  width: 100%;
}
.clearfix::before,
.clearfix::after,
.float-group::before,
.float-group::after {
  content: " ";
  display: table;
}
.clearfix::after,
.float-group::after {
  clear: both;
}
:not(pre).nobreak {
  word-wrap: normal;
}
:not(pre).nowrap {
  white-space: nowrap;
}
:not(pre).pre-wrap {
  white-space: pre-wrap;
}
:not(pre):not([class^="L"]) > code {
  font-size: 0.9375em;
  font-style: normal !important;
  letter-spacing: 0;
  padding: 0.1em 0.5ex;
  word-spacing: -0.15em;
  background: #f7f7f8;
  border-radius: 4px;
  line-height: 1.45;
  text-rendering: optimizeSpeed;
}
pre {
  color: var(--code-color);
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  line-height: 1.45;
  text-rendering: optimizeSpeed;
}
pre code,
pre pre {
  color: inherit;
  font-size: inherit;
  line-height: inherit;
}
pre > code {
  display: block;
}
pre.nowrap,
pre.nowrap pre {
  white-space: pre;
  word-wrap: normal;
}
em em {
  font-style: normal;
}
strong strong {
  font-weight: 400;
}
.keyseq {
  color: rgba(51, 51, 51, 0.8);
}
kbd {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  display: inline-block;
  color: rgba(0, 0, 0, 0.8);
  font-size: 0.65em;
  line-height: 1.45;
  background: #f7f7f7;
  border: 1px solid #ccc;
  border-radius: 3px;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), inset 0 0 0 0.1em #fff;
  margin: 0 0.15em;
  padding: 0.2em 0.5em;
  vertical-align: middle;
  position: relative;
  top: -0.1em;
  white-space: nowrap;
}
.keyseq kbd:first-child {
  margin-left: 0;
}
.keyseq kbd:last-child {
  margin-right: 0;
}
.menuseq,
.menuref {
  color: #000;
}
.menuseq b:not(.caret),
.menuref {
  font-weight: inherit;
}
.menuseq {
  word-spacing: -0.02em;
}
.menuseq b.caret {
  font-size: 1.25em;
  line-height: 0.8;
}
.menuseq i.caret {
  font-weight: bold;
  text-align: center;
  width: 0.45em;
}
b.button::before,
b.button::after {
  position: relative;
  top: -1px;
  font-weight: 400;
}
b.button::before {
  content: "[";
  padding: 0 3px 0 2px;
}
b.button::after {
  content: "]";
  padding: 0 2px 0 3px;
}
p a > code:hover {
  color: var(--code-color);
}
#header,
#content,
#footnotes,
#footer {
  width: 100%;
  margin: 0 auto;
  max-width: 62.5em;
  *zoom: 1;
  position: relative;
  padding-left: 0.9375em;
  padding-right: 0.9375em;
}
#header::before,
#header::after,
#content::before,
#content::after,
#footnotes::before,
#footnotes::after,
#footer::before,
#footer::after {
  content: " ";
  display: table;
}
#header::after,
#content::after,
#footnotes::after,
#footer::after {
  clear: both;
}
#content {
  margin-top: 1.25em;
}
#content::before {
  content: none;
}
#header > h1:first-child {
  color: var(--header-color);
  margin-top: 2.25rem;
  margin-bottom: 0;
}
#header > h1:first-child + #toc {
  margin-top: 8px;
  border-top: 1px solid #dddddf;
}
#header > h1:only-child,
body.toc2 #header > h1:nth-last-child(2) {
  border-bottom: 1px solid #dddddf;
  padding-bottom: 8px;
}
#header .details {
  border-bottom: 1px solid #dddddf;
  line-height: 1.45;
  padding-top: 0.25em;
  padding-bottom: 0.25em;
  padding-left: 0.25em;
  color: rgba(0, 0, 0, 0.6);
  display: flex;
  flex-flow: row wrap;
}
#header .details span:first-child {
  margin-left: -0.125em;
}
#header .details span.email a {
  color: rgba(0, 0, 0, 0.85);
}
#header .details br {
  display: none;
}
#header .details br + span::before {
  content: "\00a0\2013\00a0";
}
#header .details br + span.author::before {
  content: "\00a0\22c5\00a0";
  color: rgba(0, 0, 0, 0.85);
}
#header .details br + span#revremark::before {
  content: "\00a0|\00a0";
}
#header #revnumber {
  text-transform: capitalize;
}
#header #revnumber::after {
  content: "\00a0";
}
#content > h1:first-child:not([class]) {
  color: rgba(0, 0, 0, 0.85);
  border-bottom: 1px solid #dddddf;
  padding-bottom: 8px;
  margin-top: 0;
  padding-top: 1rem;
  margin-bottom: 1.25rem;
}
#toc {
  border-bottom: 1px solid #e7e7e9;
  padding-bottom: 0.5em;
}
#toc > ul {
  margin-left: 0.125em;
}
#toc ul.sectlevel0 > li > a {
  font-style: italic;
}
#toc ul.sectlevel0 ul.sectlevel1 {
  margin: 0.5em 0;
}
#toc ul {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  list-style-type: none;
}
#toc li {
  line-height: 1.3334;
  margin-top: 0.3334em;
}
#toc a {
  text-decoration: none;
}
#toc a:active {
  text-decoration: underline;
}
#toctitle {
  color: var(--title-color);
  font-size: 1.2em;
}
@media screen and (min-width: 768px) {
  #toctitle {
    font-size: 1.375em;
  }
  body.toc2 {
    padding-left: 15em;
    padding-right: 0;
  }
  #toc.toc2 {
    margin-top: 0 !important;
    background: #f8f8f7;
    position: fixed;
    width: 15em;
    left: 0;
    top: 0;
    border-right: 1px solid #e7e7e9;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
  }
  #toc.toc2 #toctitle {
    margin-top: 0;
    margin-bottom: 0.8rem;
    font-size: 1.2em;
  }
  #toc.toc2 > ul {
    font-size: 0.9em;
    margin-bottom: 0;
  }
  #toc.toc2 ul ul {
    margin-left: 0;
    padding-left: 1em;
  }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
    padding-left: 0;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 15em;
  }
  body.toc2.toc-right #toc.toc2 {
    border-right-width: 0;
    border-left: 1px solid #e7e7e9;
    left: auto;
    right: 0;
  }
}
@media screen and (min-width: 1280px) {
  body.toc2 {
    padding-left: 20em;
    padding-right: 0;
  }
  #toc.toc2 {
    width: 20em;
  }
  #toc.toc2 #toctitle {
    font-size: 1.375em;
  }
  #toc.toc2 > ul {
    font-size: 0.95em;
  }
  #toc.toc2 ul ul {
    padding-left: 1.25em;
  }
  body.toc2.toc-right {
    padding-left: 0;
    padding-right: 20em;
  }
}
#content #toc {
  border: 1px solid #e0e0dc;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f8f8f7;
  border-radius: 4px;
}
#content #toc > :first-child {
  margin-top: 0;
}
#content #toc > :last-child {
  margin-bottom: 0;
}
#footer {
  max-width: none;
  background: rgba(0, 0, 0, 0.8);
  padding: 1.25em;
}
#footer-text {
  color: hsla(0, 0%, 100%, 0.8);
  line-height: 1.44;
}
#content {
  margin-bottom: 0.625em;
}
.sect1 {
  padding-bottom: 0.625em;
}
@media screen and (min-width: 768px) {
  #content {
    margin-bottom: 1.25em;
  }
  .sect1 {
    padding-bottom: 1.25em;
  }
}
.sect1:last-child {
  padding-bottom: 0;
}
.sect1 + .sect1 {
  border-top: 1px solid #e7e7e9;
}
#content h1 > a.anchor,
h2 > a.anchor,
h3 > a.anchor,
#toctitle > a.anchor,
.sidebarblock > .content > .title > a.anchor,
h4 > a.anchor,
h5 > a.anchor,
h6 > a.anchor {
  position: absolute;
  z-index: 1001;
  width: 1.5ex;
  margin-left: -1.5ex;
  display: block;
  text-decoration: none !important;
  visibility: hidden;
  text-align: center;
  font-weight: 400;
}
#content h1 > a.anchor::before,
h2 > a.anchor::before,
h3 > a.anchor::before,
#toctitle > a.anchor::before,
.sidebarblock > .content > .title > a.anchor::before,
h4 > a.anchor::before,
h5 > a.anchor::before,
h6 > a.anchor::before {
  content: "\00A7";
  font-size: 0.85em;
  display: block;
  padding-top: 0.1em;
}
#content h1:hover > a.anchor,
#content h1 > a.anchor:hover,
h2:hover > a.anchor,
h2 > a.anchor:hover,
h3:hover > a.anchor,
#toctitle:hover > a.anchor,
.sidebarblock > .content > .title:hover > a.anchor,
h3 > a.anchor:hover,
#toctitle > a.anchor:hover,
.sidebarblock > .content > .title > a.anchor:hover,
h4:hover > a.anchor,
h4 > a.anchor:hover,
h5:hover > a.anchor,
h5 > a.anchor:hover,
h6:hover > a.anchor,
h6 > a.anchor:hover {
  visibility: visible;
}
#content h1 > a.link,
h2 > a.link,
h3 > a.link,
#toctitle > a.link,
.sidebarblock > .content > .title > a.link,
h4 > a.link,
h5 > a.link,
h6 > a.link {
  color: var(--hx-color);
  text-decoration: none;
}
#content h1 > a.link:hover,
h2 > a.link:hover,
h3 > a.link:hover,
#toctitle > a.link:hover,
.sidebarblock > .content > .title > a.link:hover,
h4 > a.link:hover,
h5 > a.link:hover,
h6 > a.link:hover {
  color: #a53221;
}
details,
.audioblock,
.imageblock,
.literalblock,
.listingblock,
.stemblock,
.videoblock {
  margin-bottom: 1.25em;
}
details {
  margin-left: 1.25rem;
}
details > summary {
  cursor: pointer;
  display: block;
  position: relative;
  line-height: 1.6;
  margin-bottom: 0.625rem;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}
details > summary::-webkit-details-marker {
  display: none;
}
details > summary::before {
  content: "";
  border: solid transparent;
  border-left: solid;
  border-width: 0.3em 0 0.3em 0.5em;
  position: absolute;
  top: 0.5em;
  left: -1.25rem;
  transform: translateX(15%);
}
details[open] > summary::before {
  border: solid transparent;
  border-top: solid;
  border-width: 0.5em 0.3em 0;
  transform: translateY(15%);
}
details > summary::after {
  content: "";
  width: 1.25rem;
  height: 1em;
  position: absolute;
  top: 0.3em;
  left: -1.25rem;
}
.admonitionblock td.content > .title,
.audioblock > .title,
.exampleblock > .title,
.imageblock > .title,
.listingblock > .title,
.literalblock > .title,
.stemblock > .title,
.openblock > .title,
.paragraph > .title,
.quoteblock > .title,
table.tableblock > .title,
.verseblock > .title,
.videoblock > .title,
.dlist > .title,
.olist > .title,
.ulist > .title,
.qlist > .title,
.hdlist > .title {
  text-rendering: optimizeLegibility;
  text-align: left;
  font-family: "Noto Serif", "DejaVu Serif", serif;
  font-size: 1rem;
  font-style: italic;
}
table.tableblock.fit-content > caption.title {
  white-space: nowrap;
  width: 0;
}
.paragraph.lead > p,
#preamble > .sectionbody > [class="paragraph"]:first-of-type p {
  font-size: 1.21875em;
  line-height: 1.6;
  color: rgba(0, 0, 0, 0.85);
}
.admonitionblock > table {
  border-collapse: separate;
  border: 0;
  background: none;
  width: 100%;
}
.admonitionblock > table td.icon {
  text-align: center;
  width: 80px;
}
.admonitionblock > table td.icon img {
  max-width: none;
}
.admonitionblock > table td.icon .title {
  font-weight: bold;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  text-transform: uppercase;
}
.admonitionblock > table td.content {
  padding-left: 1.125em;
  padding-right: 1.25em;
  border-left: 1px solid #dddddf;
  color: rgba(0, 0, 0, 0.6);
  word-wrap: anywhere;
}
.admonitionblock > table td.content > :last-child > :last-child {
  margin-bottom: 0;
}
.exampleblock > .content {
  border: 1px solid #e6e6e6;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #fff;
  border-radius: 4px;
}
.exampleblock > .content > :first-child {
  margin-top: 0;
}
.exampleblock > .content > :last-child {
  margin-bottom: 0;
}
.sidebarblock {
  border: 1px solid #dbdbd6;
  margin-bottom: 1.25em;
  padding: 1.25em;
  background: #f3f3f2;
  border-radius: 4px;
}
.sidebarblock > :first-child {
  margin-top: 0;
}
.sidebarblock > :last-child {
  margin-bottom: 0;
}
.sidebarblock > .content > .title {
  color: var(--title-color);
  margin-top: 0;
  text-align: center;
}
.exampleblock > .content > :last-child > :last-child,
.exampleblock > .content .olist > ol > li:last-child > :last-child,
.exampleblock > .content .ulist > ul > li:last-child > :last-child,
.exampleblock > .content .qlist > ol > li:last-child > :last-child,
.sidebarblock > .content > :last-child > :last-child,
.sidebarblock > .content .olist > ol > li:last-child > :last-child,
.sidebarblock > .content .ulist > ul > li:last-child > :last-child,
.sidebarblock > .content .qlist > ol > li:last-child > :last-child {
  margin-bottom: 0;
}
.literalblock pre,
.listingblock > .content > pre {
  border-radius: 4px;
  overflow-x: auto;
  padding: 1em;
  font-size: 0.8125em;
}
@media screen and (min-width: 768px) {
  .literalblock pre,
  .listingblock > .content > pre {
    font-size: 0.90625em;
  }
}
@media screen and (min-width: 1280px) {
  .literalblock pre,
  .listingblock > .content > pre {
    font-size: 1em;
  }
}
.literalblock pre,
.listingblock > .content > pre:not(.highlight),
.listingblock > .content > pre[class="highlight"],
.listingblock > .content > pre[class^="highlight "] {
  background: #f7f7f8;
}
.literalblock.output pre {
  color: #f7f7f8;
  background: rgba(0, 0, 0, 0.9);
}
.listingblock > .content {
  position: relative;
}
.listingblock code[data-lang]::before {
  display: none;
  content: attr(data-lang);
  position: absolute;
  font-size: 0.75em;
  top: 0.425rem;
  right: 0.5rem;
  line-height: 1;
  text-transform: uppercase;
  color: inherit;
  opacity: 0.5;
}
.listingblock:hover code[data-lang]::before {
  display: block;
}
.listingblock.terminal pre .command::before {
  content: attr(data-prompt);
  padding-right: 0.5em;
  color: inherit;
  opacity: 0.5;
}
.listingblock.terminal pre .command:not([data-prompt])::before {
  content: "$";
}
.listingblock pre.highlightjs {
  padding: 0;
}
.listingblock pre.highlightjs > code {
  padding: 1em;
  border-radius: 4px;
}
.listingblock pre.prettyprint {
  border-width: 0;
}
.prettyprint {
  background: #f7f7f8;
}
pre.prettyprint .linenums {
  line-height: 1.45;
  margin-left: 2em;
}
pre.prettyprint li {
  background: none;
  list-style-type: inherit;
  padding-left: 0;
}
pre.prettyprint li code[data-lang]::before {
  opacity: 1;
}
pre.prettyprint li:not(:first-child) code[data-lang]::before {
  display: none;
}
table.linenotable {
  border-collapse: separate;
  border: 0;
  margin-bottom: 0;
  background: none;
}
table.linenotable td[class] {
  color: inherit;
  vertical-align: top;
  padding: 0;
  line-height: inherit;
  white-space: normal;
}
table.linenotable td.code {
  padding-left: 0.75em;
}
table.linenotable td.linenos,
pre.pygments .linenos {
  border-right: 1px solid;
  opacity: 0.35;
  padding-right: 0.5em;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
pre.pygments span.linenos {
  display: inline-block;
  margin-right: 0.75em;
}
.quoteblock {
  margin: 0 1em 1.25em 1.5em;
  display: table;
}
.quoteblock:not(.excerpt) > .title {
  margin-left: -1.5em;
  margin-bottom: 0.75em;
}
.quoteblock blockquote,
.quoteblock p {
  color: rgba(0, 0, 0, 0.85);
  font-size: 1.15rem;
  line-height: 1.75;
  word-spacing: 0.1em;
  letter-spacing: 0;
  font-style: italic;
  text-align: justify;
}
.quoteblock blockquote {
  margin: 0;
  padding: 0;
  border: 0;
}
.quoteblock blockquote::before {
  content: "\201c";
  float: left;
  font-size: 2.75em;
  font-weight: bold;
  line-height: 0.6em;
  margin-left: -0.6em;
  color: var(--title-color);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.quoteblock blockquote > .paragraph:last-child p {
  margin-bottom: 0;
}
.quoteblock .attribution {
  margin-top: 0.75em;
  margin-right: 0.5ex;
  text-align: right;
}
.verseblock {
  margin: 0 1em 1.25em;
}
.verseblock pre {
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-size: 1.15rem;
  color: rgba(0, 0, 0, 0.85);
  font-weight: 300;
  text-rendering: optimizeLegibility;
}
.verseblock pre strong {
  font-weight: 400;
}
.verseblock .attribution {
  margin-top: 1.25rem;
  margin-left: 0.5ex;
}
.quoteblock .attribution,
.verseblock .attribution {
  font-size: 0.9375em;
  line-height: 1.45;
  font-style: italic;
}
.quoteblock .attribution br,
.verseblock .attribution br {
  display: none;
}
.quoteblock .attribution cite,
.verseblock .attribution cite {
  display: block;
  letter-spacing: -0.025em;
  color: rgba(0, 0, 0, 0.6);
}
.quoteblock.abstract blockquote::before,
.quoteblock.excerpt blockquote::before,
.quoteblock .quoteblock blockquote::before {
  display: none;
}
.quoteblock.abstract blockquote,
.quoteblock.abstract p,
.quoteblock.excerpt blockquote,
.quoteblock.excerpt p,
.quoteblock .quoteblock blockquote,
.quoteblock .quoteblock p {
  line-height: 1.6;
  word-spacing: 0;
}
.quoteblock.abstract {
  margin: 0 1em 1.25em;
  display: block;
}
.quoteblock.abstract > .title {
  margin: 0 0 0.375em;
  font-size: 1.15em;
  text-align: center;
}
.quoteblock.excerpt > blockquote,
.quoteblock .quoteblock {
  padding: 0 0 0.25em 1em;
  border-left: 0.25em solid #dddddf;
}
.quoteblock.excerpt,
.quoteblock .quoteblock {
  margin-left: 0;
}
.quoteblock.excerpt blockquote,
.quoteblock.excerpt p,
.quoteblock .quoteblock blockquote,
.quoteblock .quoteblock p {
  color: inherit;
  font-size: 1.0625rem;
}
.quoteblock.excerpt .attribution,
.quoteblock .quoteblock .attribution {
  color: inherit;
  font-size: 0.85rem;
  text-align: left;
  margin-right: 0;
}
p.tableblock:last-child {
  margin-bottom: 0;
}
td.tableblock > .content {
  margin-bottom: 1.25em;
  word-wrap: anywhere;
}
td.tableblock > .content > :last-child {
  margin-bottom: -1.25em;
}
table.tableblock,
th.tableblock,
td.tableblock {
  border: 0 solid #dedede;
}
table.grid-all > * > tr > * {
  border-width: 1px;
}
table.grid-cols > * > tr > * {
  border-width: 0 1px;
}
table.grid-rows > * > tr > * {
  border-width: 1px 0;
}
table.frame-all {
  border-width: 1px;
}
table.frame-ends {
  border-width: 1px 0;
}
table.frame-sides {
  border-width: 0 1px;
}
table.frame-none > colgroup + * > :first-child > *,
table.frame-sides > colgroup + * > :first-child > * {
  border-top-width: 0;
}
table.frame-none > :last-child > :last-child > *,
table.frame-sides > :last-child > :last-child > * {
  border-bottom-width: 0;
}
table.frame-none > * > tr > :first-child,
table.frame-ends > * > tr > :first-child {
  border-left-width: 0;
}
table.frame-none > * > tr > :last-child,
table.frame-ends > * > tr > :last-child {
  border-right-width: 0;
}
table.stripes-all > * > tr,
table.stripes-odd > * > tr:nth-of-type(odd),
table.stripes-even > * > tr:nth-of-type(even),
table.stripes-hover > * > tr:hover {
  background: #f8f8f7;
}
th.halign-left,
td.halign-left {
  text-align: left;
}
th.halign-right,
td.halign-right {
  text-align: right;
}
th.halign-center,
td.halign-center {
  text-align: center;
}
th.valign-top,
td.valign-top {
  vertical-align: top;
}
th.valign-bottom,
td.valign-bottom {
  vertical-align: bottom;
}
th.valign-middle,
td.valign-middle {
  vertical-align: middle;
}
table thead th,
table tfoot th {
  font-weight: bold;
}
tbody tr th {
  background: #f7f8f7;
}
tbody tr th,
tbody tr th p,
tfoot tr th,
tfoot tr th p {
  color: rgba(0, 0, 0, 0.8);
  font-weight: bold;
}
p.tableblock > code:only-child {
  background: none;
  padding: 0;
}
p.tableblock {
  font-size: 1em;
}
ol {
  margin-left: 1.75em;
}
ul li ol {
  margin-left: 1.5em;
}
dl dd {
  margin-left: 1.125em;
}
dl dd:last-child,
dl dd:last-child > :last-child {
  margin-bottom: 0;
}
li p,
ul dd,
ol dd,
.olist .olist,
.ulist .ulist,
.ulist .olist,
.olist .ulist {
  margin-bottom: 0.625em;
}
ul.checklist,
ul.none,
ol.none,
ul.no-bullet,
ol.no-bullet,
ol.unnumbered,
ul.unstyled,
ol.unstyled {
  list-style-type: none;
}
ul.no-bullet,
ol.no-bullet,
ol.unnumbered {
  margin-left: 0.625em;
}
ul.unstyled,
ol.unstyled {
  margin-left: 0;
}
li > p:empty:only-child::before {
  content: "";
  display: inline-block;
}
ul.checklist > li > p:first-child {
  margin-left: -1em;
}
ul.checklist > li > p:first-child > .fa-square-o:first-child,
ul.checklist > li > p:first-child > .fa-check-square-o:first-child {
  width: 1.25em;
  font-size: 0.8em;
  position: relative;
  bottom: 0.125em;
}
ul.checklist > li > p:first-child > input[type="checkbox"]:first-child {
  margin-right: 0.25em;
}
ul.inline {
  display: flex;
  flex-flow: row wrap;
  list-style: none;
  margin: 0 0 0.625em -1.25em;
}
ul.inline > li {
  margin-left: 1.25em;
}
.unstyled dl dt {
  font-weight: 400;
  font-style: normal;
}
ol.arabic {
  list-style-type: decimal;
}
ol.decimal {
  list-style-type: decimal-leading-zero;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}
ol.lowergreek {
  list-style-type: lower-greek;
}
.hdlist > table,
.colist > table {
  border: 0;
  background: none;
}
.hdlist > table > tbody > tr,
.colist > table > tbody > tr {
  background: none;
}
td.hdlist1,
td.hdlist2 {
  vertical-align: top;
  padding: 0 0.625em;
}
td.hdlist1 {
  font-weight: bold;
  padding-bottom: 1.25em;
}
td.hdlist2 {
  word-wrap: anywhere;
}
.literalblock + .colist,
.listingblock + .colist {
  margin-top: -0.5em;
}
.colist td:not([class]):first-child {
  padding: 0.4em 0.75em 0;
  line-height: 1;
  vertical-align: top;
}
.colist td:not([class]):first-child img {
  max-width: none;
}
.colist td:not([class]):last-child {
  padding: 0.25em 0;
}
.thumb,
.th {
  line-height: 0;
  display: inline-block;
  border: 4px solid #fff;
  box-shadow: 0 0 0 1px #ddd;
}
.imageblock.left {
  margin: 0.25em 0.625em 1.25em 0;
}
.imageblock.right {
  margin: 0.25em 0 1.25em 0.625em;
}
.imageblock > .title {
  margin-bottom: 0;
}
.imageblock.thumb,
.imageblock.th {
  border-width: 6px;
}
.imageblock.thumb > .title,
.imageblock.th > .title {
  padding: 0 0.125em;
}
.image.left,
.image.right {
  margin-top: 0.25em;
  margin-bottom: 0.25em;
  display: inline-block;
  line-height: 0;
}
.image.left {
  margin-right: 0.625em;
}
.image.right {
  margin-left: 0.625em;
}
a.image {
  text-decoration: none;
  display: inline-block;
}
a.image object {
  pointer-events: none;
}
sup.footnote,
sup.footnoteref {
  font-size: 0.875em;
  position: static;
  vertical-align: super;
}
sup.footnote a,
sup.footnoteref a {
  text-decoration: none;
}
sup.footnote a:active,
sup.footnoteref a:active {
  text-decoration: underline;
}
#footnotes {
  padding-top: 0.75em;
  padding-bottom: 0.75em;
  margin-bottom: 0.625em;
}
#footnotes hr {
  width: 20%;
  min-width: 6.25em;
  margin: -0.25em 0 0.75em;
  border-width: 1px 0 0;
}
#footnotes .footnote {
  padding: 0 0.375em 0 0.225em;
  line-height: 1.3334;
  font-size: 0.875em;
  margin-left: 1.2em;
  margin-bottom: 0.2em;
}
#footnotes .footnote a:first-of-type {
  font-weight: bold;
  text-decoration: none;
  margin-left: -1.05em;
}
#footnotes .footnote:last-of-type {
  margin-bottom: 0;
}
#content #footnotes {
  margin-top: -0.625em;
  margin-bottom: 0;
  padding: 0.75em 0;
}
div.unbreakable {
  page-break-inside: avoid;
}
.big {
  font-size: larger;
}
.small {
  font-size: smaller;
}
.underline {
  text-decoration: underline;
}
.overline {
  text-decoration: overline;
}
.line-through {
  text-decoration: line-through;
}
.aqua {
  color: #00bfbf;
}
.aqua-background {
  background: #00fafa;
}
.black {
  color: #000;
}
.black-background {
  background: #000;
}
.blue {
  color: #0000bf;
}
.blue-background {
  background: #0000fa;
}
.fuchsia {
  color: #bf00bf;
}
.fuchsia-background {
  background: #fa00fa;
}
.gray {
  color: #606060;
}
.gray-background {
  background: #7d7d7d;
}
.green {
  color: #006000;
}
.green-background {
  background: #007d00;
}
.lime {
  color: #00bf00;
}
.lime-background {
  background: #00fa00;
}
.maroon {
  color: #600000;
}
.maroon-background {
  background: #7d0000;
}
.navy {
  color: #000060;
}
.navy-background {
  background: #00007d;
}
.olive {
  color: #606000;
}
.olive-background {
  background: #7d7d00;
}
.purple {
  color: #600060;
}
.purple-background {
  background: #7d007d;
}
.red {
  color: #bf0000;
}
.red-background {
  background: #fa0000;
}
.silver {
  color: #909090;
}
.silver-background {
  background: #bcbcbc;
}
.teal {
  color: #006060;
}
.teal-background {
  background: #007d7d;
}
.white {
  color: #bfbfbf;
}
.white-background {
  background: #fafafa;
}
.yellow {
  color: #bfbf00;
}
.yellow-background {
  background: #fafa00;
}
span.icon > .fa {
  cursor: default;
}
a span.icon > .fa {
  cursor: inherit;
}
.admonitionblock td.icon [class^="fa icon-"] {
  font-size: 2.5em;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
  cursor: default;
}
.admonitionblock td.icon .icon-note::before {
  content: "\f05a";
  color: #19407c;
}
.admonitionblock td.icon .icon-tip::before {
  content: "\f0eb";
  text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8);
  color: #111;
}
.admonitionblock td.icon .icon-warning::before {
  content: "\f071";
  color: #bf6900;
}
.admonitionblock td.icon .icon-caution::before {
  content: "\f06d";
  color: #bf3400;
}
.admonitionblock td.icon .icon-important::before {
  content: "\f06a";
  color: #bf0000;
}
.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 50%;
  text-align: center;
  font-size: 0.75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: normal;
  font-weight: bold;
}
.conum[data-value] * {
  color: #fff !important;
}
.conum[data-value] + b {
  display: none;
}
.conum[data-value]::after {
  content: attr(data-value);
}
pre .conum[data-value] {
  position: relative;
  top: -0.125em;
}
b.conum * {
  color: inherit !important;
}
.conum:not([data-value]):empty {
  display: none;
}
dt,
th.tableblock,
td.content,
div.footnote {
  text-rendering: optimizeLegibility;
}
h1,
h2,
p,
td.content,
span.alt,
summary {
  letter-spacing: -0.01em;
}
p strong,
td.content strong,
div.footnote strong {
  letter-spacing: -0.005em;
}
p,
blockquote,
dt,
td.content,
span.alt,
summary {
  font-size: 1.0625rem;
}
p {
  margin-bottom: 1.25rem;
}
.sidebarblock p,
.sidebarblock dt,
.sidebarblock td.content,
p.tableblock {
  font-size: 1em;
}
.exampleblock > .content {
  background: #fffef7;
  border-color: #e0e0dc;
  box-shadow: 0 1px 4px #e0e0dc;
}
.print-only {
  display: none !important;
}
@page {
  margin: 1.25cm 0.75cm;
}
@media print {
  * {
    box-shadow: none !important;
    text-shadow: none !important;
  }
  html {
    font-size: 80%;
  }
  a {
    color: inherit !important;
    text-decoration: underline !important;
  }
  a.bare,
  a[href^="#"],
  a[href^="mailto:"] {
    text-decoration: none !important;
  }
  a[href^="http:"]:not(.bare)::after,
  a[href^="https:"]:not(.bare)::after {
    content: "(" attr(href) ")";
    display: inline-block;
    font-size: 0.875em;
    padding-left: 0.25em;
  }
  abbr[title] {
    border-bottom: 1px dotted;
  }
  abbr[title]::after {
    content: " (" attr(title) ")";
  }
  pre,
  blockquote,
  tr,
  img,
  object,
  svg {
    page-break-inside: avoid;
  }
  thead {
    display: table-header-group;
  }
  svg {
    max-width: 100%;
  }
  p,
  blockquote,
  dt,
  td.content {
    font-size: 1em;
    orphans: 3;
    widows: 3;
  }
  h2,
  h3,
  #toctitle,
  .sidebarblock > .content > .title {
    page-break-after: avoid;
  }
  #header,
  #content,
  #footnotes,
  #footer {
    max-width: none;
  }
  #toc,
  .sidebarblock,
  .exampleblock > .content {
    background: none !important;
  }
  #toc {
    border-bottom: 1px solid #dddddf !important;
    padding-bottom: 0 !important;
  }
  body.book #header {
    text-align: center;
  }
  body.book #header > h1:first-child {
    border: 0 !important;
    margin: 2.5em 0 1em;
  }
  body.book #header .details {
    border: 0 !important;
    display: block;
    padding: 0 !important;
  }
  body.book #header .details span:first-child {
    margin-left: 0 !important;
  }
  body.book #header .details br {
    display: block;
  }
  body.book #header .details br + span::before {
    content: none !important;
  }
  body.book #toc {
    border: 0 !important;
    text-align: left !important;
    padding: 0 !important;
    margin: 0 !important;
  }
  body.book #toc,
  body.book #preamble,
  body.book h1.sect0,
  body.book .sect1 > h2 {
    page-break-before: always;
  }
  .listingblock code[data-lang]::before {
    display: block;
  }
  #footer {
    padding: 0 0.9375em;
  }
  .hide-on-print {
    display: none !important;
  }
  .print-only {
    display: block !important;
  }
  .hide-for-print {
    display: none !important;
  }
  .show-for-print {
    display: inherit !important;
  }
}
@media amzn-kf8, print {
  #header > h1:first-child {
    margin-top: 1.25rem;
  }
  .sect1 {
    padding: 0 !important;
  }
  .sect1 + .sect1 {
    border: 0;
  }
  #footer {
    background: none;
  }
  #footer-text {
    color: rgba(0, 0, 0, 0.6);
    font-size: 0.9em;
  }
}
@media amzn-kf8 {
  #header,
  #content,
  #footnotes,
  #footer {
    padding: 0;
  }
}
body {
  background-color: hsl(99, 33%, 99%);
}

</style>
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Developers Reference</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#overview">1. Overview</a></li>
<li><a href="#querybuilder">2. <code>QueryBuilder</code></a>
<ul class="sectlevel2">
<li><a href="#initial-methods">2.1. <em>Initial</em> methods</a></li>
<li><a href="#conditional-methods">2.2. <em>Conditional</em> methods</a></li>
<li><a href="#terminal-methods">2.3. <em>Terminal</em> methods</a></li>
<li><a href="#informal-methods">2.4. <em>Informal</em> methods</a></li>
<li><a href="#querybuilder-examples">2.5. <code>QueryBuilder</code> examples</a></li>
</ul>
</li>
<li><a href="#responsebuilder">3. <code>ResponseBuilder</code></a>
<ul class="sectlevel2">
<li><a href="#initial-methods-2">3.1. <em>Initial</em> methods</a></li>
<li><a href="#batching-methods">3.2. <em>Batching</em> methods</a></li>
<li><a href="#terminal-methods-2">3.3. <em>Terminal</em> methods</a></li>
<li><a href="#responsebuilder-examples">3.4. <code>ResponseBuilder</code> examples</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal of Query/Response for Spring AMQP is to provide developers with tools that are easy to use
and understand. We believe that a procedural and imperative style of writing
programs, or thinking about tasks in programs, is broadly understood and
valuable model. With Query/Response for Spring AMQP we try to support this, rather than introducing
any new concepts for <em>streams</em>, <em>futures</em> or <em>promises</em>.</p>
</div>
<div class="paragraph">
<p>With Query/Response for Spring AMQP developers should feel enabled to write code in a <em>normal</em> way.
However, it is our mission to raise awareness of things that are hard to
consider, when building <a href="https://en.wikipedia.org/wiki/Distributed_computing">distributed systems</a>. The tools try to convey
these considerations, by making them transparent and part of the API.</p>
</div>
<div class="paragraph">
<p>In the next couple of sections we&#8217;ll look closer at the <code>QueryBuilder</code> and the
<code>ResponseBuilder</code> types. We&#8217;ll discuss how to use them in detail, and try to
explain the concepts behind them, and the intention of their implementation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="querybuilder"><a class="anchor" href="#querybuilder"></a>2. <code>QueryBuilder</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>QueryBuilder</code> class is a central point of entry, and provides a fluent
builder-API, for publishing queries. It&#8217;s provided as a bean, by enabling
Query/Response for Spring AMQP, using the <code>@EnableQueryResponse</code> annotation. It may be injected
as a dependency to provide access from methods in any Spring component.</p>
</div>
<div class="paragraph">
<p>We recommend injecting it via the component constructor, and keeping it as a
private field. The <code>findAuthors()</code> method below, shows how to access the
<code>queryBuilder</code> field in order to publish a query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Authors</span> {

    <span class="directive">private</span> <span class="directive">final</span> QueryBuilder queryBuilder;

    <span class="directive">public</span> Authors(QueryBuilder queryBuilder) {

        <span class="local-variable">this</span>.queryBuilder = queryBuilder;
    }

    <span class="directive">public</span> <span class="predefined-type">Collection</span>&lt;<span class="predefined-type">String</span>&gt; findAuthors() {

        <span class="keyword">return</span> queryBuilder.queryFor(<span class="string"><span class="delimiter">&quot;</span><span class="content">authors</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">String</span>.class)
            .waitingFor(<span class="integer">800</span>)
            .orEmpty();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the published query is defined by the string <strong>term</strong>
<code>"authors"</code>. This is how the most basic contract of Query/Response is defined. Any
string or text term may be published as a query.</p>
</div>
<div class="paragraph">
<p>The second argument is the expected type of any received response elements. It
is not published with the query, but rather used to coerce or interpret any
received responses. This means that regardless of the payload of any response,
in this case Query/Response for Spring AMQP will attempt to read the response elements as the
declared type <code>String.class</code>.</p>
</div>
<div class="paragraph">
<p>Queries are built and published using the <code>queryFor(..)</code> <em>initial</em> method.
Any following call to one of the <em>terminal</em> methods <code>orEmpty()</code>,
<code>orDefaults(..)</code> and <code>orThrows(..)</code> will build and execute the query, and block
on the calling thread.</p>
</div>
<div class="paragraph">
<p>Since the call above to <code>orEmpty()</code> blocks the thread, users have to specify
one or more query <em>conditionals</em>. In the example above, the call to
<code>waitingFor(..)</code> defines that the call will block for around 800 milliseconds.</p>
</div>
<div class="paragraph">
<p>Constructing queries with the <code>QueryBuilder</code> revolves around creating a
composition of <em>initial</em>, <em>conditional</em>, maybe an optional <em>informal</em> and
exactly one <em>terminal</em> method call. In the table below is a short review of the
different builder methods and their types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. <code>QueryBuilder</code> fluid API method types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>queryFor(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>initial</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a new builder for a query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>waitingFor(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>conditional</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the waiting/blocking condition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>takingAtMost(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>conditional</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets a limit condition, a maximum</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>takingAtLeast(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>conditional</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets a limit condition, a minimum</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>orEmpty()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>terminal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminates with empty, after conditionals are evaluated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>orDefaults(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>terminal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminates with some defaults, after conditionals are evaluated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>orThrow(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>terminal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminates by throwing, after conditionals are evaluated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onError(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>informal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows for explicit logging etc.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Let&#8217;s take a closer look at each of the builder method types.</p>
</div>
<div class="sect2">
<h3 id="initial-methods"><a class="anchor" href="#initial-methods"></a>2.1. <em>Initial</em> methods</h3>
<div class="paragraph">
<p>At the moment there&#8217;s only one <em>initial</em> method and it&#8217;s declared as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  <span class="directive">public</span> &lt;T&gt; ChainingQueryBuilder&lt;T&gt; queryFor(<span class="predefined-type">String</span> term, <span class="predefined-type">Class</span>&lt;T&gt; type)</code></pre>
</div>
</div>
<div class="paragraph">
<p>So we can query for any <code>String</code> <strong>term</strong> and given the expected mapped or
coerced <strong>type</strong> as a <code>Class&lt;T&gt;</code>. The returned <code>ChainingQueryBuilder&lt;T&gt;</code>
provides the capabilities of the fluid API.</p>
</div>
</div>
<div class="sect2">
<h3 id="conditional-methods"><a class="anchor" href="#conditional-methods"></a>2.2. <em>Conditional</em> methods</h3>
<div class="paragraph">
<p>All <em>conditional</em> properties can be composed together by the <code>QueryResponse</code>
builder API, to define whether a query is successful or not. If an executing
query is completed in a <strong>successful</strong> way, fulfilling the <em>conditionals</em>, it will
return and not consume any more responses.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>waitingFor(..)</code> - defines a timeout <em>conditional</em>. The built query will
evaluate as <strong>successful</strong> if <em>any</em> responses were consumed after the
(approximate) given time limit has elapsed. There are a few different methods
declared, to specify the timeout:</p>
<div class="ulist">
<ul>
<li>
<p><code>waitingFor(long millis)</code></p>
</li>
<li>
<p><code>waitingFor(long amount, TemporalUnit timeUnit)</code></p>
</li>
<li>
<p><code>waitingFor(Duration duration)</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>takingAtMost(int atMost)</code> - defines a limiting <em>conditional</em> on the
aggregated number of received elements. The built query evaluates to
<strong>successful</strong>, and returns, when the given amount is reached.</p>
</li>
<li>
<p><code>takingAtLeast(int atLeast)</code> - defines a minimum <em>conditional</em> on the number
of received element. The built query evaluates to <strong>successful</strong>, only if at
least the given number of elements can be consumed.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="terminal-methods"><a class="anchor" href="#terminal-methods"></a>2.3. <em>Terminal</em> methods</h3>
<div class="paragraph">
<p>Only one <em>terminal</em> method can be invoked on the builder, per query. It will
ensure that the query is built and executed. All <em>terminal</em> methods are
declared to return <code>Collection&lt;T&gt;</code> where the type parameter <code>&lt;T&gt;</code> is given
in the <em>initial</em> method <code>type</code> parameter.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>orEmpty()</code> - defines the query to return an empty <code>Collection</code> in case the
<em>conditionals</em> do not evaluate to <strong>successful</strong>.</p>
</li>
<li>
<p><code>orDefaults(..)</code> - defines the query to return with some provided <em>defaults</em>
in case the <em>conditionals</em> do not evaluate to <strong>successful</strong>. There are a couple
different methods declared for defaults:</p>
<div class="ulist">
<ul>
<li>
<p><code>orDefaults(Collection&lt;T&gt; defaults)</code> - set at <em>build-time</em>.</p>
</li>
<li>
<p><code>orDefaults(Supplier&lt;Collection&lt;T&gt;&gt; defaults)</code> - supplied at <em>run-time</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>orThrow(..)</code> - defines the query to throw an exception in case the
<em>conditionals</em> do not evaluate to <strong>successful</strong>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="informal-methods"><a class="anchor" href="#informal-methods"></a>2.4. <em>Informal</em> methods</h3>
<div class="paragraph">
<p>Currently there&#8217;s only one <em>informal</em> builder method, allowing for extended
logging or information capture, in case the query fails or an exception is
thrown.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  <span class="directive">public</span> ChainingQueryBuilder&lt;T&gt; onError(Consumer&lt;<span class="predefined-type">Throwable</span>&gt; handler)</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Try to think more about how the <code>QueryBuilder</code> API covers the exceptional
     query-cases, as part of the composition of <em>conditionals</em>. If clients try
     to use <em>terminals</em> that provide sensible defaults, it may not be necessary
     to build other types of complex recovery or retries.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="querybuilder-examples"><a class="anchor" href="#querybuilder-examples"></a>2.5. <code>QueryBuilder</code> examples</h3>
<div class="paragraph">
<p>Below are some examples of how the different <code>QueryBuilder</code> API methods can be
combined.</p>
</div>
<div class="paragraph">
<p>Using <code>takingAtMost(..)</code>, combined with <code>waitingFor(..)</code>, system resources may
be preserved and the client can be protected from consuming too much data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  <span class="keyword">return</span> queryBuilder.queryFor(<span class="string"><span class="delimiter">&quot;</span><span class="content">authors</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">String</span>.class)
                  .takingAtMost(<span class="integer">10</span>)
                  .waitingFor(<span class="integer">800</span>)
                  .orDefaults(Authors.defaults());</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is possible to express constraints at the integration point, also when using
Query/Response for Spring AMQP, throwing on an unfulfilled query, as an option to more lenient
handling with defaults.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  <span class="keyword">return</span> queryBuilder.queryFor(<span class="string"><span class="delimiter">&quot;</span><span class="content">offers/rental</span><span class="delimiter">&quot;</span></span>, Offer.class)
                  .takingAtLeast(<span class="integer">10</span>)
                  .takingAtMost(<span class="integer">20</span>)
                  .waitingFor(<span class="integer">2</span>, ChronoUnit.SECONDS)
                  .orThrow(TooFewOffersConstraintException::<span class="keyword">new</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>informal</em> builder feature, allows for transparency into queries that may
have to be observed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  <span class="keyword">return</span> queryBuilder.queryFor(<span class="string"><span class="delimiter">&quot;</span><span class="content">offers/rental</span><span class="delimiter">&quot;</span></span>, NewOffer.class)
                  .takingAtLeast(<span class="integer">3</span>)
                  .waitingFor(<span class="integer">400</span>)
                  .onError(error -&gt; LOG.error(<span class="string"><span class="delimiter">&quot;</span><span class="content">Failure!</span><span class="delimiter">&quot;</span></span>, error))
                  .orThrow(TooFewOffersConstraintException::<span class="keyword">new</span>);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="responsebuilder"><a class="anchor" href="#responsebuilder"></a>3. <code>ResponseBuilder</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Another entry-point into Query/Response for Spring AMQP is the <code>ResponseBuilder</code>. It provides a
fluid builder-API that allows users to create responding services or components.</p>
</div>
<div class="paragraph">
<p>It is also provided as a bean, when using the <code>@EnableQueryResponse</code> annotation
in a Spring application. It can easily be injected as a dependency to provide
access from methods in Spring components.</p>
</div>
<div class="paragraph">
<p>The <code>respondWithAuthors()</code> method below, shows how the injected builder is used
to create a responding service. It is invoked by the Spring application context,
on the <code>ApplicationReadyEvent</code> event.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">OnlyThreeAuthors</span> {

    <span class="directive">private</span> <span class="directive">final</span> ResponseBuilder responseBuilder;

    <span class="directive">public</span> OnlyThreeAuthors(ResponseBuilder responseBuilder) {

        <span class="local-variable">this</span>.responseBuilder = responseBuilder;
    }

    <span class="annotation">@EventListener</span>(ApplicationReadyEvent.class)
    <span class="directive">public</span> <span class="type">void</span> respondWithAuthors() {

        responseBuilder.respondTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">authors</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">String</span>.class)
            .withAll()
            .from(<span class="string"><span class="delimiter">&quot;</span><span class="content">Tolkien</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Lewis</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Rowling</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above the responding service is defined by calling the builder
method <code>respondTo(..)</code> with the query <strong>term</strong> parameter <code>"authors"</code>. It will
be bound to publish the given 3 authors as <code>String.class</code> entries, whenever it
consumes a query for the matching string <strong>term</strong> <code>"authors"</code>.</p>
</div>
<div class="paragraph">
<p>This is the most basic premiss of Query/Response, that any string or text term may be
interpreted as a query - it is however up to the response publisher to
determine what the query means.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
We&#8217;ve tried to provide information around the Query/Response <em>protocol</em> and
     philosophy in the later chapter on <a href="#The Query/Response Protocol">[The Query/Response Protocol]</a>. Go
     there to find out more.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The second parameter is the the type of each element, that will be published in
the response. It is given both as a type hint for the compiler, as well as a
parameter to the data mapper. Here it&#8217;s trivial, the three authors are given as
<code>String.class</code> entries.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The data mapper mentioned above, is in fact the
      <code>com.fasterxml.jackson.databind.ObjectMapper</code> and Query/Response for Spring AMQP currently uses
      JSON as the transport format. This means that type hints, JSON mapping
      configuration annotations or custom mappings will apply. However as data
      mapping on the consumer side is done by coercion, the published format
      must conform to some agreed upon standard, shape or protocol.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Response publishers are built using the <code>respondTo(..)</code> <em>initial</em> method. Any
following call to one of the <em>terminal</em> methods <code>from(..)</code> or <code>suppliedBy(..)</code>
will create and register it, as its own consumer in another thread. The
builder call returns immediately.</p>
</div>
<div class="paragraph">
<p>The <code>ResponseBuilder</code> comes with some methods to allow for <em>partitioning</em> or
<em>batching</em>, which can be used to control the transfer of data to some degree.</p>
</div>
<div class="paragraph">
<p>The table below shows a summary of the builder methods and types.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. <code>ResponseBuilder</code> fluid API method types</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>respondTo(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>initial</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Creates a new builder for a query</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>withAll()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>batching</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies NO batches</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>withBatchesOf(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>batching</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the batch size of responses</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>from(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>terminal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminates with some given response data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>suppliedBy(..)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>terminal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terminates with some supplied response data</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Let&#8217;s take a closer look at each of the builder method types.</p>
</div>
<div class="sect2">
<h3 id="initial-methods-2"><a class="anchor" href="#initial-methods-2"></a>3.1. <em>Initial</em> methods</h3>
<div class="paragraph">
<p>At the moment there&#8217;s only one <em>initial</em> method for building responses. It is
declared as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  <span class="directive">public</span> &lt;T&gt; ChainingResponseBuilder&lt;T&gt; respondTo(<span class="predefined-type">String</span> term, <span class="predefined-type">Class</span>&lt;T&gt; type)</code></pre>
</div>
</div>
<div class="paragraph">
<p>So we can create a response for any <code>String</code> <strong>term</strong> and declare that we intend
to publish elements of some <strong>type</strong> given as a <code>Class&lt;T&gt;</code>. The returned
<code>ChainingResponseBuilder&lt;T&gt;</code> provides the capabilities of the fluid API.</p>
</div>
</div>
<div class="sect2">
<h3 id="batching-methods"><a class="anchor" href="#batching-methods"></a>3.2. <em>Batching</em> methods</h3>
<div class="paragraph">
<p>Control over how response elements are published can be made by using the
<em>batching</em> methods that the builder provides.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>withAll()</code> - defines that <strong>no</strong> batching should be used, and will publish
all given elements, or try to drain a supplied <code>Iterator</code> all at once.</p>
</li>
<li>
<p><code>withBatchesOf(int size)</code> - defines a batch size, which the response publisher
will use, to create a series of response messages, with up-to the given <code>size</code>
of elements.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="terminal-methods-2"><a class="anchor" href="#terminal-methods-2"></a>3.3. <em>Terminal</em> methods</h3>
<div class="paragraph">
<p>Only one <em>terminal</em> method can be called on the builder, per response. It will
ensure that a responder is created and added as a query-consumer, a subscriber
to the query <strong>term</strong> as a topic. It is not attached to the calling thread, so
the builder call always returns after the <em>terminal</em> call.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>from(..)</code> - declares the source for the provided response data elements. It
is declared in a few different ways, for alternative use:</p>
<div class="ulist">
<ul>
<li>
<p><code>from(T&#8230;&#8203; elements)</code> - vararg elements</p>
</li>
<li>
<p><code>from(Collection&lt;T&gt; elements)</code> - provided collection at <em>build-time</em></p>
</li>
<li>
<p><code>from(Supplier&lt;Iterator&lt;T&gt;&gt; elements)</code> - supplied iterator at <em>build-time</em></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>suppliedBy(Supplier&lt;Collection&lt;T&gt;&gt; elements)</code> - declares that response data
is supplied at <em>run-time</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="responsebuilder-examples"><a class="anchor" href="#responsebuilder-examples"></a>3.4. <code>ResponseBuilder</code> examples</h3>
<div class="paragraph">
<p>Batch responses provide developers with more options to tune and throttle a
system using Query/Response across many services. It may tune and change the profile
of resource use, in a network.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  responseBuilder.respondTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">offers/monday</span><span class="delimiter">&quot;</span></span>, Offer.class)
      .withBatchesOf(<span class="integer">20</span>)
      .from(offers.findAllOffersByDayOfWeek(<span class="predefined-type">Calendar</span>.MONDAY));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dynamic responses are easy to build, with an API that suits modern Java, using
lazy calls to suppliers of data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">  responseBuilder.respondTo(<span class="string"><span class="delimiter">&quot;</span><span class="content">users/current</span><span class="delimiter">&quot;</span></span>, Token.class)
      .withBatchesOf(<span class="integer">128</span>)
      .suppliedBy(userTokenService::findAllCurrentUserTokens);</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-03-19 09:50:39 +0100
</div>
</div>
</body>
</html>